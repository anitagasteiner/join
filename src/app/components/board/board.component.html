<div class="main-container" [ngClass]="{'overflow-hidden': generalService.addTaskContainerOpened}">
    
    <div class="search-add-container">

        @if (generalService.addTaskContainerOpened) {

            <div class="add-task-container">
    
                <h2>Add Task</h2>
    
                <app-add-task-form></app-add-task-form>
    
            </div>
    
        }

        <input class="search-task" placeholder="Find task" onfocus="this.placeholder=''" type="text" name="find-task" id="findTask">
     
        <button class="btn-submit">Add task</button>

    </div>

    @if (generalService.taskDetailsOpened) {

        <div class="bg-light">

            <app-task-details></app-task-details>
    
        </div>

    }

    <div class="tasks-main-container">

        <div class="tasks-container">

            <div>
                To do
                <img src="/img/plus-btn.svg" (click)="openAddTaskContainer('to-do')">
            </div>

            <div>
                @for (task of tasks$ | async; track task.id; let index = $index) {
                    @if (task.status == "to-do") {
                        <app-task [task]="task" (click)="showTaskDetails(task)"></app-task>
                    }            
                }
            </div>

        </div>

        <div class="tasks-container">

            <div>
                In progress
                <img src="/img/plus-btn.svg" (click)="openAddTaskContainer('in-progress')">
            </div>

            <div>
                @for (task of tasks$ | async; track task.title; let index = $index) {
                    @if (task.status == "in-progress") {
                        <app-task [task]="task" (click)="showTaskDetails(task)"></app-task>
                    }            
                }
            </div>

        </div>

        <div class="tasks-container">

            <div>
                Awaiting feedback
                <img src="/img/plus-btn.svg" (click)="openAddTaskContainer('waiting')">
            </div>

            <div>
                @for (task of tasks$ | async; track task.title; let index = $index) {
                    @if (task.status == "waiting") {
                        <app-task [task]="task" (click)="showTaskDetails(task)"></app-task>
                    }            
                }
            </div>            

        </div>

        <div class="tasks-container">

            <div>
                Done
            </div>

            <div>
                @for (task of tasks$ | async; track task.title; let index = $index) {
                    @if (task.status == "done") {
                        <app-task [task]="task" (click)="showTaskDetails(task)"></app-task>
                    }            
                }
            </div>

        </div>        

    </div>

</div>